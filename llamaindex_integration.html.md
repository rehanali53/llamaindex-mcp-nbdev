# LlamaIndex Integration


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Basic Text-to-SQL Query Engine

------------------------------------------------------------------------

<a
href="https://github.com/rehanali53/llamaindex-mcp-nbdev/blob/main/llamaindex_mcp_nbdev/llamaindex_integration.py#L25"
target="_blank" style="float:right; font-size:smaller">source</a>

### LlamaIndexSQLServer

>  LlamaIndexSQLServer (server_name:str='llamaindex-sqlite',
>                           db_path:str='demo.db',
>                           openai_api_key:Optional[str]=None)

*Extended MCP Server with LlamaIndex natural language query
capabilities.*

## Query Examples and Capabilities

------------------------------------------------------------------------

<a
href="https://github.com/rehanali53/llamaindex-mcp-nbdev/blob/main/llamaindex_mcp_nbdev/llamaindex_integration.py#L113"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_sample_queries

>  get_sample_queries ()

*Get sample natural language queries for demonstration.*

## Standalone Query Function

------------------------------------------------------------------------

<a
href="https://github.com/rehanali53/llamaindex-mcp-nbdev/blob/main/llamaindex_mcp_nbdev/llamaindex_integration.py#L129"
target="_blank" style="float:right; font-size:smaller">source</a>

### query_database_nl

>  query_database_nl (question:str, db_path:str='demo.db')

\*Query SQLite database using natural language.

Args: question: Natural language question db_path: Path to SQLite
database

Returns: Dictionary with answer and generated SQL\*

## Demo Functions

``` python
# Test database setup
def setup_test_data(db_path: str = "test_llama.db"):
    """Create test database with sample data."""
    conn, cursor = init_db(db_path)
    
    # Clear existing data
    cursor.execute("DELETE FROM people")
    
    # Insert test data
    test_data = [
        ("Alice Johnson", 28, "Developer"),
        ("Bob Smith", 35, "Engineer"),
        ("Carol Davis", 42, "Manager"),
        ("David Wilson", 23, "Developer"),
        ("Eve Brown", 31, "Designer"),
        ("Frank Miller", 45, "Engineer"),
        ("Grace Lee", 29, "Developer"),
        ("Henry Taylor", 38, "Manager"),
        ("Iris Chen", 26, "Designer"),
        ("Jack White", 52, "Engineer")
    ]
    
    cursor.executemany(
        "INSERT INTO people (name, age, profession) VALUES (?, ?, ?)",
        test_data
    )
    
    conn.commit()
    conn.close()
    
    print(f"Test database created with {len(test_data)} records")

# Create test database
setup_test_data()
```

``` python
# Demonstrate natural language queries (requires API key)
if LLAMAINDEX_AVAILABLE:
    print("LlamaIndex is available!")
    print("\nTo use natural language queries, you need to:")
    print("1. Set OPENAI_API_KEY environment variable")
    print("2. Or pass openai_api_key parameter when creating server")
    print("\nExample queries you can ask:")
    for query in get_sample_queries()[:5]:
        print(f"- {query}")
else:
    print("LlamaIndex not installed. Install with:")
    print("pip install llama-index llama-index-llms-openai")
```

## Usage Examples

------------------------------------------------------------------------

<a
href="https://github.com/rehanali53/llamaindex-mcp-nbdev/blob/main/llamaindex_mcp_nbdev/chat_interface.py#L154"
target="_blank" style="float:right; font-size:smaller">source</a>

### main

>  main ()

*Run LlamaIndex-enabled MCP server.*
